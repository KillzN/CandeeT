import _0x431ab0 from'node-fetch';import _0x3a15f7 from'axios';import _0x2080a5 from'yt-search';import{youtubedl,youtubedlv2}from'@bochilteam/scraper';import _0x2e4595 from'ytdl-core';import{bestFormat,getUrlDl}from'../lib/y2dl.js';import _0x4af0ca from'../lib/ytdll.js';import _0x214000 from'fs';let limit1=0x64,limit2=0x190,limit_a1=0x32,limit_a2=0x190;const handler=async(_0x35fb02,{conn:_0x32ee6f,command:_0x3ac612,args:_0x4d03da,text:_0x5e5cc0,usedPrefix:_0x4d5b2d})=>{let _0x3b82ab={'key':{'participants':'0@s.whatsapp.net','remoteJid':'status@broadcast','fromMe':![],'id':'Halo'},'message':{'contactMessage':{'vcard':'BEGIN:VCARD\x0aVERSION:3.0\x0aN:Sy;Bot;;;\x0aFN:y\x0aitem1.TEL;waid='+_0x35fb02['sender']['split']('@')[0x0]+':'+_0x35fb02['sender']['split']('@')[0x0]+'\x0aitem1.X-ABLabel:Ponsel\x0aEND:VCARD'}},'participant':'0@s.whatsapp.net'};if(!_0x5e5cc0)return _0x32ee6f['reply'](_0x35fb02['chat'],'[❗]\x20Ponga\x20el\x20nombre\x20de\x20su\x20video\x20o\x20musica\x20\x20\x0a\x0a\x20ejemplo:\x20\x0a\x20*'+(_0x4d5b2d+_0x3ac612)+'\x20Killzn\x20bot\x20md',_0x3b82ab,_0x35fb02);try{_0x32ee6f['reply'](_0x35fb02['chat'],''+wait,_0x3b82ab,_0x35fb02);const _0x5326af=await search(_0x4d03da['join']('\x20'));let _0x537d4f='';if(_0x3ac612==='play'||_0x3ac612=='play3'||_0x3ac612=='playdoc'||_0x3ac612=='musica'||_0x3ac612=='sonido')_0x537d4f='audio\x20🔊';else(_0x3ac612==='play2'||_0x3ac612=='video'||_0x3ac612=='play4'||_0x3ac612=='playdoc2'||_0x3ac612=='peliculas'||_0x3ac612=='pelis')&&(_0x537d4f='video\x20🎥');const _0x1ba848=('┌──⊰🍁Y\x20O\x20U\x20T\x20U\x20B\x20E🍁⊰\x0a│⊳\x20\x20\x20\x20⇄\x20\x20\x20\x20◁\x20\x20\x20ㅤ\x20\x20❚❚ㅤ\x20\x20\x20▷ㅤ\x20\x20\x20\x20↻\x0a│⊳✍️\x20Autor:\x20'+_0x5326af[0x0]['author']['name']+'\x0a│⊳📆\x20Publicado:\x20'+_0x5326af[0x0]['ago']+'\x20\x0a│⊳🕟\x20Duración:\x20'+secondString(_0x5326af[0x0]['duration']['seconds'])+'\x0a│⊳💬\x20visitas:\x20'+(''+MilesNumber(_0x5326af[0x0]['views']))+'\x0a└──────────⊰')['trim']();await _0x32ee6f['sendMessage'](_0x35fb02['chat'],{'text':_0x1ba848,'contextInfo':{'externalAdReply':{'title':_0x5326af[0x0]['title'],'body':packname,'thumbnailUrl':_0x5326af[0x0]['thumbnail'],'mediaType':0x1,'showAdAttribution':!![],'renderLargerThumbnail':!![]}}},{'quoted':_0x35fb02});if(_0x3ac612=='audio'){const _0x539705='128kbps',_0x528a0c=_0x5326af[0x0]['url'],_0x52b946=await youtubedl(_0x528a0c)['catch'](async _0x1697d9=>await youtubedlv2(_0x528a0c)),_0x3882f4=await _0x52b946['audio'][_0x539705]['download'](),_0x574b5f=await _0x52b946['title'],_0x49c3a9=await _0x52b946?.['size'],_0x5b2131=_0x49c3a9?.['replace']('MB','')?.['replace']('GB','')?.['replace']('KB',''),_0x4c28a3=await getBuffer(_0x3882f4),_0x44b094=_0x4c28a3['byteLength'],_0x3f8c5a=_0x44b094/0x400,_0x17bb5a=_0x3f8c5a/0x400,_0x143600=_0x17bb5a['toFixed'](0x2);if(_0x143600>=limit_a2)return;if(_0x143600>=limit_a1&&_0x143600<=limit_a2){await _0x32ee6f['sendMessage'](_0x35fb02['chat'],{'audio':_0x4c28a3,'mimetype':'audio/mpeg','fileName':'error.mp3','mimetype':'audio/mpeg','ptt':!![]},{'quoted':_0x35fb02});return;}else{await _0x32ee6f['sendMessage'](_0x35fb02['chat'],{'audio':_0x4c28a3,'mimetype':'audio/mpeg','fileName':'error.mp3','mimetype':'audio/mpeg','ptt':!![]},{'quoted':_0x35fb02});return;}}}catch(_0x1dd7d1){console['log'](_0x1dd7d1);throw'*❌\x20lo\x20siento\x20ha\x20corrido\x20un\x20error\x20verifique\x20que\x20su\x20enlace\x20o\x20el\x20de\x20YouTube\x20sea\x20correcto*\x0a\x0a\x20*en\x20caso\x20de\x20que\x20no\x20mande\x20tu\x20video\x20o\x20música\x20es\x20porque\x20pesa\x20demasiado\x20el\x20contenido\x20recomendación\x20para\x20descargarlo\x20usar\x0a\x0aplay3\x20y\x20play4❌*';}};handler['help']=['audio']['map'](_0x3d6e2d=>_0x3d6e2d+'\x20<\x20busqueda\x20>'),handler['tags']=['downloader'],handler['command']=/^(audio)$/i,handler['register']=!![],handler['group']=!![];export default handler;async function search(_0x412bed,_0x7b704b={}){const _0x33edaf=await _0x2080a5['search']({'query':_0x412bed,'hl':'es','gl':'ES',..._0x7b704b});return _0x33edaf['videos'];}function MilesNumber(_0x5ea2e3){const _0x570080=/(\d)(?=(\d{3})+(?!\d))/g,_0x16de6b='$1.',_0x371ff6=_0x5ea2e3['toString']()['split']('.');return _0x371ff6[0x0]=_0x371ff6[0x0]['replace'](_0x570080,_0x16de6b),_0x371ff6[0x1]?_0x371ff6['join']('.'):_0x371ff6[0x0];}function secondString(_0x45648b){_0x45648b=Number(_0x45648b);const _0x1c18ff=Math['floor'](_0x45648b/(0xe10*0x18)),_0x8c586b=Math['floor'](_0x45648b%(0xe10*0x18)/0xe10),_0x1cb51=Math['floor'](_0x45648b%0xe10/0x3c),_0x39edd7=Math['floor'](_0x45648b%0x3c),_0x1f943b=_0x1c18ff>0x0?_0x1c18ff+(_0x1c18ff==0x1?'\x20día,\x20':'\x20días,\x20'):'',_0x12bc7e=_0x8c586b>0x0?_0x8c586b+(_0x8c586b==0x1?'\x20hora,\x20':'\x20horas,\x20'):'',_0x420c0d=_0x1cb51>0x0?_0x1cb51+(_0x1cb51==0x1?'\x20minuto,\x20':'\x20minutos,\x20'):'',_0x3890b3=_0x39edd7>0x0?_0x39edd7+(_0x39edd7==0x1?'\x20segundo':'\x20segundos'):'';return _0x1f943b+_0x12bc7e+_0x420c0d+_0x3890b3;}function bytesToSize(_0x54ed82){return new Promise((_0x6effd0,_0x1430f8)=>{const _0x33db42=['Bytes','KB','MB','GB','TB'];if(_0x54ed82===0x0)return'n/a';const _0x299bd9=parseInt(Math['floor'](Math['log'](_0x54ed82)/Math['log'](0x400)),0xa);if(_0x299bd9===0x0)_0x6effd0(_0x54ed82+'\x20'+_0x33db42[_0x299bd9]);_0x6effd0((_0x54ed82/0x400**_0x299bd9)['toFixed'](0x1)+'\x20'+_0x33db42[_0x299bd9]);});}const getBuffer=async(_0x5bc62b,_0x879eaf)=>{_0x879eaf?_0x879eaf:{};const _0x59c8ae=await _0x3a15f7({'method':'get','url':_0x5bc62b,'headers':{'DNT':0x1,'Upgrade-Insecure-Request':0x1},..._0x879eaf,'responseType':'arraybuffer'});return _0x59c8ae['data'];};